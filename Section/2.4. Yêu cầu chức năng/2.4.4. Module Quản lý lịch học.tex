\newpage
\subsubsection*{Use Case 08: Tạo lịch rảnh (Tutor)}
\begin{samepage}
\begin{table}[h!]
\begin{tabular}{|l|lll|l}
\cline{1-4}
\textbf{ID} &
  \multicolumn{3}{l|}{UC-08} &
   \\ \cline{1-4}
\textbf{Tên} &
  \multicolumn{3}{l|}{Tạo lịch rảnh (Tutor)} &
   \\ \cline{1-4}
\textbf{Mô tả} &
  \multicolumn{3}{l|}{Tutor khai báo thời gian rảnh để sinh viên có thể đặt lịch học.} &
   \\ \cline{1-4}
\textbf{Actor chính} &
  \multicolumn{3}{l|}{Tutor} &
   \\ \cline{1-4}
\textbf{Actor phụ} &
  \multicolumn{3}{l|}{Hệ thống} &
   \\ \cline{1-4}
\textbf{Tiền điều kiện} &
  \multicolumn{3}{l|}{Tutor đã đăng ký tài khoản và hồ sơ hợp lệ.} &
   \\ \cline{1-4}
\textbf{Hậu điều kiện} &
  \multicolumn{3}{l|}{Lịch rảnh được lưu trong DB và hiển thị cho SV lựa chọn.} &
   \\ \cline{1-4}
\multirow{6}{*}{\textbf{Luồng sự kiện}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{1} &
  \multicolumn{1}{l|}{Tutor} &
  Đăng nhập, chọn chức năng “Tạo lịch rảnh”. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{2} &
  \multicolumn{1}{l|}{Tutor} &
  Nhập ngày, giờ, hình thức học (online/offline). &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{3} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Kiểm tra định dạng dữ liệu và phát hiện trùng \\ lặp lịch.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{4} &
  \multicolumn{1}{l|}{Hệ thống} &
  Lưu lịch rảnh vào DB. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{5} &
  \multicolumn{1}{l|}{Hệ thống} &
  Hiển thị thông báo “Tạo lịch rảnh thành công”. &
   \\ \cline{1-4}
\multirow{3}{*}{\textbf{Luồng thay thế}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{2a} &
  \multicolumn{1}{l|}{Tutor} &
  Bỏ trống ngày/giờ → Hệ thống yêu cầu nhập lại. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{3a} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Phát hiện lịch rảnh đã tồn tại → hiển thị lỗi, \\ không lưu.\end{tabular} &
   \\ \cline{1-4}
\textbf{Ngoại lệ} &
  \multicolumn{3}{l|}{Hệ thống lỗi DB khi lưu → hiển thị “Tạo lịch thất bại, thử lại sau”.} &
   \\ \cline{1-4}
\textbf{Business Rules} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Tutor chỉ có thể tạo lịch rảnh trong khung giờ hợp lệ của trường \\ (ví dụ 7h – 21h).\end{tabular}} &
   \\ \cline{1-4}
\textbf{Data requirement} &
  \multicolumn{3}{l|}{Availability(availID, tutorID, date, startTime, endTime, mode, status)} &
   \\ \cline{1-4}
\end{tabular}
\caption{Bảng đặc tả chức năng tạo lịch rảnh (Tutor)}
\end{table}
\end{samepage}

%========================================================================================

\newpage
\subsubsection*{Use Case 09: Đặt lịch học (SV)}
\begin{samepage}
\begin{table}[h!]
\begin{tabular}{|l|lll|l}
\cline{1-4}
\textbf{ID} &
  \multicolumn{3}{l|}{UC-09} &
   \\ \cline{1-4}
\textbf{Tên} &
  \multicolumn{3}{l|}{Đặt lịch học (SV)} &
   \\ \cline{1-4}
\textbf{Mô tả} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Sinh viên đặt lịch học cố định với Tutor đã được ghép cho môn học. \\ Lịch này được áp dụng xuyên suốt môn học cho đến khi kết thúc, không \\ cần đăng ký lại từng buổi.\end{tabular}} &
   \\ \cline{1-4}
\textbf{Actor chính} &
  \multicolumn{3}{l|}{Sinh viên} &
   \\ \cline{1-4}
\textbf{Actor phụ} &
  \multicolumn{3}{l|}{Hệ thống} &
   \\ \cline{1-4}
\textbf{Tiền điều kiện} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}SV đã đăng ký chương trình học và đã được ghép Tutor cho môn học \\ (UC-06 hoặc UC-07). \\ Tutor đã khai báo lịch rảnh (UC-08).\end{tabular}} &
   \\ \cline{1-4}
\textbf{Hậu điều kiện} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Một lịch học cố định được lưu vào DB, gắn với cặp SV – Tutor – Môn \\ học. \\ Lịch này được lặp lại tự động trong suốt thời gian môn học diễn ra.\end{tabular}} &
   \\ \cline{1-4}
\multirow{9}{*}{\textbf{Luồng sự kiện}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{1} &
  \multicolumn{1}{l|}{Sinh viên} &
  Đăng nhập, chọn chức năng “Đặt lịch học” &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{2} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Hiển thị danh sách môn học mà SV đã được \\ ghép Tutor.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{3} &
  \multicolumn{1}{l|}{Sinh viên} &
  Chọn môn học. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{4} &
  \multicolumn{1}{l|}{Hệ thống} &
  Hiển thị danh sách slot rảnh của Tutor. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{5} &
  \multicolumn{1}{l|}{Sinh viên} &
  \begin{tabular}[c]{@{}l@{}}Chọn 1 slot cố định (ngày trong tuần + \\ khung giờ) để học.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{6} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Kiểm tra: \\ Slot còn chỗ (\textless maxSV/slot). \\ SV không có lịch học khác trùng giờ.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{7} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Lưu lịch cố định này vào DB (gắn với môn \\ học+ Tutor + SV).\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{8} &
  \multicolumn{1}{l|}{Hệ thống} &
  Gửi thông báo xác nhận cho SV và Tutor. &
   \\ \cline{1-4}
\multirow{4}{*}{\textbf{Luồng thay thế}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{4a} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Không có slot rảnh phù hợp \\ → báo “Chưa có lịch khả dụng”.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{6a} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}Slot đã full → báo “Lịch không khả dụng, \\ vui lòng chọn slot khác”.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{6b} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}SV có lịch học khác trùng giờ → báo lỗi, \\ yêu cầu chọn lại.\end{tabular} &
   \\ \cline{1-4}
\textbf{Ngoại lệ} &
  \multicolumn{3}{l|}{Hệ thống lỗi khi lưu DB → hiển thị “Đặt lịch thất bại, thử lại sau”.} &
   \\ \cline{1-4}
\textbf{Business Rules} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Mỗi môn học, SV chỉ được đặt 1 lịch học cố định với Tutor. \\ Lịch học cố định sẽ được lặp lại hàng tuần cho đến khi kết thúc môn. \\ SV phải đặt lịch trước ít nhất 1 tuần trước buổi học đầu tiên. \\ Tutor có thể dạy nhiều SV trong cùng slot, nhưng không vượt quá giới \\ hạn maxSV.\end{tabular}} &
   \\ \cline{1-4}
\textbf{Data requirement} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Schedule(scheduleID, tutorID, studentID, subjectID, date, startTime, \\ endTime, status)\end{tabular}} &
   \\ \cline{1-4}
\end{tabular}
\caption{Bảng đặc tả chức năng đặt lịch học (SV)}
\end{table}
\end{samepage}

%========================================================================================

\newpage
\subsubsection*{Use Case 10: Hủy/Đổi lịch học cố định}
\begin{samepage}
\begin{table}[h!]
\begin{tabular}{|l|lll|l}
\cline{1-4}
\textbf{ID} &
  \multicolumn{3}{l|}{UC-10} &
   \\ \cline{1-4}
\textbf{Tên} &
  \multicolumn{3}{l|}{Hủy/Đổi lịch học cố định} &
   \\ \cline{1-4}
\textbf{Mô tả} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Sinh viên có thể hủy hoặc đổi lịch học cố định của một môn đã đăng ký. \\ Lịch học áp dụng xuyên suốt môn, nên hủy/đổi sẽ ảnh hưởng toàn bộ các \\ buổi còn lại của môn đó. Tutor không được quyền hủy.\end{tabular}} &
   \\ \cline{1-4}
\textbf{Actor chính} &
  \multicolumn{3}{l|}{Sinh viên} &
   \\ \cline{1-4}
\textbf{Actor phụ} &
  \multicolumn{3}{l|}{Tutor (chỉ nhận thông báo), Hệ thống} &
   \\ \cline{1-4}
\textbf{Tiền điều kiện} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}SV đã đăng ký môn học và đã đặt lịch cố định (UC-09).\\ Môn học chưa kết thúc.\end{tabular}} &
   \\ \cline{1-4}
\textbf{Hậu điều kiện} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Lịch học được hủy hoặc thay đổi, thông tin được cập nhật trong DB.\\ SV có thể đặt lại lịch mới (UC-09) nếu muốn.\end{tabular}} &
   \\ \cline{1-4}
\multirow{6}{*}{\textbf{Luồng sự kiện}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{1} &
  \multicolumn{1}{l|}{Sinh viên} &
  Đăng nhập, chọn chức năng “Hủy/Đổi lịch học”. &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{2} &
  \multicolumn{1}{l|}{Hệ thống} &
  \begin{tabular}[c]{@{}l@{}}hiển thị danh sách môn học mà SV đã có lịch \\ cố định.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{3} &
  \multicolumn{1}{l|}{Sinh viên} &
  Chọn 1 môn học &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{4} &
  \multicolumn{1}{l|}{Sinh viên} &
  \begin{tabular}[c]{@{}l@{}}Nếu hủy:\\ Hệ thống cập nhật trạng thái lịch = “Cancelled” \\ cho toàn bộ lịch cố định của môn đó.\\ Hệ thống gửi thông báo đến Tutor và SV.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{5} &
  \multicolumn{1}{l|}{Sinh viên} &
  \begin{tabular}[c]{@{}l@{}}Nếu đổi:\\ Hệ thống hiển thị danh sách rảnh khác của Tutor.\\ SV chọn 1 slot mới.\\ Hệ thống kiểm tra:\\     Slot chưa full.\\     Không trùng với lịch học khác của SV.\\ Nếu hợp lệ → Hệ thống cập nhật slot mới cho \\ toàn bộ môn học.\\ Hệ thống gửi thông báo cho cả SV và Tutor.\end{tabular} &
   \\ \cline{1-4}
\multirow{3}{*}{\textbf{Luồng thay thế}} &
  \multicolumn{1}{l|}{\textbf{Bước}} &
  \multicolumn{1}{l|}{\textbf{Thực hiện bởi}} &
  \textbf{Mô tả} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{3a} &
  \multicolumn{1}{l|}{Sinh viên} &
  \begin{tabular}[c]{@{}l@{}}SV chọn môn học đã kết thúc → Hệ thống báo \\ “Không thể hủy/đổi vì môn đã kết thúc”.\end{tabular} &
   \\ \cline{2-4}
 &
  \multicolumn{1}{l|}{5a} &
  \multicolumn{1}{l|}{Sinh viên} &
  \begin{tabular}[c]{@{}l@{}}SV chọn môn mới đã full hoặc trùng lịch → Hệ \\ thống báo lỗi, yêu cầu chọn slot khác.\end{tabular} &
   \\ \cline{1-4}
\textbf{Ngoại lệ} &
  \multicolumn{3}{l|}{Hệ thống lỗi DB khi cập nhật → hiển thị “Thao tác thất bại, thử lại sau”.} &
   \\ \cline{1-4}
\textbf{Business Rules} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}SV chỉ được hủy/đổi lịch cố định trước ít nhất 1 tuần so với buổi học kế \\ tiếp. \\ Tutor không được quyền hủy lịch.\\ Khi đổi lịch, toàn bộ buổi học trong môn đó sẽ chuyển sang slot mới \\ (không đổi từng buổi riêng lẻ).\end{tabular}} &
   \\ \cline{1-4}
\textbf{Data requirement} &
  \multicolumn{3}{l|}{\begin{tabular}[c]{@{}l@{}}Schedule(scheduleID, tutorID, studentID, subjectID, dayOfWeek, \\ startTime, endTime, recurrence, status, updatedAt)\\ recurrence = weekly (lặp hằng tuần). status = Active / Cancelled\end{tabular}} &
   \\ \cline{1-4}
\end{tabular}
\caption{Bảng đặc tả chức năng hủy/đổi lịch học cố định}
\end{table}
\end{samepage}

%========================================================================================